/* 
1. Se deschide DataGrip si se creeaza un nou proiect
2.Se creaza un nou data source oracle, conectat cu baza de date deja instalata
3. Se alege Host: localhost, Port 1521, SID: XE si ne autentificam cu userul si 
parola specifica serverului oracle deja instalat, Verificam conectiunea pe 
"Test Connection" si daca este "Succesful"     apasam pe OK.       
4. Apasam pe "+" si cream "query console" si de aici incepem introducerea 
codului de mai jos" 
  */

DROP TABLE Companii
DROP TABLE Inchirieri
DROP TABLE Metoda_de_Plata
DROP TABLE Plati
DROP TABLE Utilizatori
DROP TABLE Birouri
DROP TABLE Lista_Facilitati
DROP TABLE Tip_Birou
DROP TABLE Numar_Locuri
DROP TABLE Pret_Birou
DROP TABLE Cladiri
DROP TABLE Inchirieri_Birouri

-- Companii
CREATE TABLE Companii (
  Companie_ID   NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  Nume          VARCHAR2(255) NOT NULL,
  Email         VARCHAR2(255) NOT NULL,
  Telefon       VARCHAR2(50)  NOT NULL
);

-- Utilizatori
CREATE TABLE Utilizatori (
  Utilizator_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  Nume          VARCHAR2(100) NOT NULL,
  Prenume       VARCHAR2(100) NOT NULL,
  Email         VARCHAR2(255) NOT NULL,
  Telefon       VARCHAR2(50)  NOT NULL
);

-- Cladiri
CREATE TABLE Cladiri (
  Cladiri_ID    NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  Denumire      VARCHAR2(200) NOT NULL,
  Adresa        VARCHAR2(400) NOT NULL,
  Proprietar    VARCHAR2(255) NOT NULL
);

-- Lista_Facilitati
CREATE TABLE Lista_Facilitati (
  Facilitate_ID        NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  Descriere_Facilitate VARCHAR2(200) NOT NULL
);

-- Tip_Birouri
CREATE TABLE Tip_Birouri (
  Tip_Birouri_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  Tip            VARCHAR2(50) NOT NULL
                   CHECK (Tip IN (
                     'Birou deschis',
                     'Birou dedicat',
                     'Birou privat',
                     'Birou pentru echipă',
                     'Sală de conferințe'
                   )),
  Pret_Loc       NUMBER(10,2) NOT NULL CHECK (Pret_Loc > 0)
);

-- Numar_Locuri
CREATE TABLE Numar_Locuri (
  Numar_Locuri_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  Numar_Locuri    NUMBER        NOT NULL
                   CHECK (Numar_Locuri BETWEEN 1 AND 4)
);

-- Birouri
CREATE TABLE Birouri (
  Birou_ID        NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  Tip_Birouri_ID  NUMBER NOT NULL,
  Numar_Locuri_ID NUMBER NOT NULL,
  Cladiri_ID      NUMBER NOT NULL,
  Etaj            NUMBER NOT NULL CHECK (Etaj BETWEEN 1 AND 10),
  Numar           NUMBER NOT NULL CHECK (Numar BETWEEN 1 AND 100),
  CONSTRAINT fk_birouri_tip     FOREIGN KEY (Tip_Birouri_ID)  REFERENCES Tip_Birouri   (Tip_Birouri_ID),
  CONSTRAINT fk_birouri_nr_loc  FOREIGN KEY (Numar_Locuri_ID) REFERENCES Numar_Locuri  (Numar_Locuri_ID),
  CONSTRAINT fk_birouri_cladiri FOREIGN KEY (Cladiri_ID)      REFERENCES Cladiri       (Cladiri_ID)
);

-- Inchirieri
CREATE TABLE Inchirieri (
  Inchiriere_ID    NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  Companie_ID      NUMBER NOT NULL,
  Data_inchirierii DATE   NOT NULL,
  Data_start       DATE   NOT NULL,
  Data_final       DATE   NOT NULL,
  CONSTRAINT fk_inchirieri_companie FOREIGN KEY (Companie_ID)
    REFERENCES Companii(Companie_ID)
);

-- Inchirieri_birouri
CREATE TABLE Inchirieri_birouri (
  Inchiriere_ID NUMBER NOT NULL,
  Birou_ID      NUMBER NOT NULL,
  Utilizator_ID NUMBER NOT NULL,
  PRIMARY KEY (Inchiriere_ID, Birou_ID, Utilizator_ID),
  CONSTRAINT fk_ib_inchiriere FOREIGN KEY (Inchiriere_ID)
    REFERENCES Inchirieri(Inchiriere_ID),
  CONSTRAINT fk_ib_birou      FOREIGN KEY (Birou_ID)
    REFERENCES Birouri(Birou_ID),
  CONSTRAINT fk_ib_utilizator FOREIGN KEY (Utilizator_ID)
    REFERENCES Utilizatori(Utilizator_ID)
);

-- Facilitati_Birouri
CREATE TABLE Facilitati_Birouri (
  Birou_ID      NUMBER NOT NULL,
  Facilitate_ID NUMBER NOT NULL,
  PRIMARY KEY (Birou_ID, Facilitate_ID),
  CONSTRAINT fk_fb_birou      FOREIGN KEY (Birou_ID)
    REFERENCES Birouri        (Birou_ID),
  CONSTRAINT fk_fb_facilitate FOREIGN KEY (Facilitate_ID)
    REFERENCES Lista_Facilitati(Facilitate_ID)
);

-- Metoda_de_Plata
CREATE TABLE Metoda_de_Plata (
  Metoda_plata_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  Metoda_Plata    VARCHAR2(50) NOT NULL
                   CHECK (Metoda_Plata IN ('cash','card','transfer bancar'))
);

-- Plati
CREATE TABLE Plati (
  Plati_ID        NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  Inchiriere_ID   NUMBER NOT NULL,
  Companie_ID     NUMBER NOT NULL,
  Metoda_plata_ID NUMBER NOT NULL,
  Suma_de_Plata   NUMBER(12,2) NOT NULL CHECK (Suma_de_Plata > 0),
  Data_plata      DATE,
  CONSTRAINT fk_plati_inchiriere FOREIGN KEY (Inchiriere_ID)
    REFERENCES Inchirieri    (Inchiriere_ID),
  CONSTRAINT fk_plati_companie   FOREIGN KEY (Companie_ID)
    REFERENCES Companii       (Companie_ID),
  CONSTRAINT fk_plati_metoda     FOREIGN KEY (Metoda_plata_ID)
    REFERENCES Metoda_de_Plata(Metoda_plata_ID)
);



-- Companii
INSERT INTO Companii (Nume, Email, Telefon) VALUES ('ACME SRL',         'office@acme.ro',      '0722-123-456');
INSERT INTO Companii (Nume, Email, Telefon) VALUES ('Beta Group',       'contact@beta.com',    '0744-987-654');
INSERT INTO Companii (Nume, Email, Telefon) VALUES ('Cobalt SA',        'info@cobalt.biz',     '0733-111-222');
INSERT INTO Companii (Nume, Email, Telefon) VALUES ('Delta Consulting', 'hello@delta.eu',      '0755-333-444');
INSERT INTO Companii (Nume, Email, Telefon) VALUES ('Omega Solutions',  'info@omega.ro',       '0799-111-222');
INSERT INTO Companii (Nume, Email, Telefon) VALUES ('Gamma LLC',        'contact@gamma.com',   '0788-333-444');
INSERT INTO Companii (Nume, Email, Telefon) VALUES ('Extra Solving', 'extra@solving.com', '0722-555-787');

-- Utilizatori
INSERT INTO Utilizatori (Nume, Prenume, Email, Telefon) VALUES ('Alex',      'Adriana',    'adriana.alex@acme.ro',       '0722-111-222');
INSERT INTO Utilizatori (Nume, Prenume, Email, Telefon) VALUES ('Ionescu',   'Ana',        'ana.ionescu@beta.com',       '0744-222-333');
INSERT INTO Utilizatori (Nume, Prenume, Email, Telefon) VALUES ('Marin',     'George',     'george.marin@cobalt.biz',    '0733-333-444');
INSERT INTO Utilizatori (Nume, Prenume, Email, Telefon) VALUES ('Dumitrescu','Ioana',      'ioana.dumitrescu@delta.eu',  '0755-444-555');
INSERT INTO Utilizatori (Nume, Prenume, Email, Telefon) VALUES ('Vasilescu', 'Mihai',      'mihai.vasilescu@acme.ro',    '0722-555-666');
INSERT INTO Utilizatori (Nume, Prenume, Email, Telefon) VALUES ('Petrescu',  'Andrei',     'andrei.petrescu@example.com','0766-234-567');
INSERT INTO Utilizatori (Nume, Prenume, Email, Telefon) VALUES ('Stan',      'Alexandra',  'alexandra.stan@example.com', '0766-345-678');

-- Cladiri
INSERT INTO Cladiri (Denumire, Adresa, Proprietar) VALUES ('Monolith',         'Str. Unirii 1',           'Globex Corp');
INSERT INTO Cladiri (Denumire, Adresa, Proprietar) VALUES ('Tech Tower',       'Bvd. Revoluției 5',       'Initech');
INSERT INTO Cladiri (Denumire, Adresa, Proprietar) VALUES ('Innovation Hub',   'Str. Libertății 10',      'Umbrella Corp');
INSERT INTO Cladiri (Denumire, Adresa, Proprietar) VALUES ('Enterprise Center','Str. Căii Victoriei 15',  'Wayne Enterprises');
INSERT INTO Cladiri (Denumire, Adresa, Proprietar) VALUES ('Summit Plaza',     'Bvd. Aviatorilor 99',     'Stark Tower Inc');

-- Lista Facilitati
INSERT INTO Lista_Facilitati (Descriere_Facilitate) VALUES ('Espressor de cafea');
INSERT INTO Lista_Facilitati (Descriere_Facilitate) VALUES ('Imprimantă');
INSERT INTO Lista_Facilitati (Descriere_Facilitate) VALUES ('TV');
INSERT INTO Lista_Facilitati (Descriere_Facilitate) VALUES ('Proiector');
INSERT INTO Lista_Facilitati (Descriere_Facilitate) VALUES ('Microfoane profesioniste');
INSERT INTO Lista_Facilitati (Descriere_Facilitate) VALUES ('Tablă smart');
INSERT INTO Lista_Facilitati (Descriere_Facilitate) VALUES ('Aparatură de conferință video');
INSERT INTO Lista_Facilitati (Descriere_Facilitate) VALUES ('Parcare');
INSERT INTO Lista_Facilitati (Descriere_Facilitate) VALUES ('Serviciu de recepție');

-- Tip Birouri
INSERT INTO Tip_Birouri (Tip, Pret_Loc) VALUES ('Birou deschis',       20.00);
INSERT INTO Tip_Birouri (Tip, Pret_Loc) VALUES ('Birou dedicat',       35.00);
INSERT INTO Tip_Birouri (Tip, Pret_Loc) VALUES ('Birou privat',        75.00);
INSERT INTO Tip_Birouri (Tip, Pret_Loc) VALUES ('Birou pentru echipă',150.00);
INSERT INTO Tip_Birouri (Tip, Pret_Loc) VALUES ('Sală de conferințe', 300.00);

-- Numar Locuri
INSERT INTO Numar_Locuri (Numar_Locuri) VALUES (1);
INSERT INTO Numar_Locuri (Numar_Locuri) VALUES (2);
INSERT INTO Numar_Locuri (Numar_Locuri) VALUES (3);
INSERT INTO Numar_Locuri (Numar_Locuri) VALUES (4);

-- Birouri
INSERT INTO Birouri (Tip_Birouri_ID, Numar_Locuri_ID, Cladiri_ID, Etaj, Numar) VALUES (1, 1, 1, 1,  10);
INSERT INTO Birouri (Tip_Birouri_ID, Numar_Locuri_ID, Cladiri_ID, Etaj, Numar) VALUES (2, 2, 1, 1,  20);
INSERT INTO Birouri (Tip_Birouri_ID, Numar_Locuri_ID, Cladiri_ID, Etaj, Numar) VALUES (3, 3, 1, 2,  30);
INSERT INTO Birouri (Tip_Birouri_ID, Numar_Locuri_ID, Cladiri_ID, Etaj, Numar) VALUES (3, 4, 1, 2,  31);
INSERT INTO Birouri (Tip_Birouri_ID, Numar_Locuri_ID, Cladiri_ID, Etaj, Numar) VALUES (5, 4, 1, 3,  40);
INSERT INTO Birouri (Tip_Birouri_ID, Numar_Locuri_ID, Cladiri_ID, Etaj, Numar) VALUES (4, 4, 2, 1,  50);
INSERT INTO Birouri (Tip_Birouri_ID, Numar_Locuri_ID, Cladiri_ID, Etaj, Numar) VALUES (4, 4, 2, 2,  51);
INSERT INTO Birouri (Tip_Birouri_ID, Numar_Locuri_ID, Cladiri_ID, Etaj, Numar) VALUES (2, 2, 2, 2,  21);
INSERT INTO Birouri (Tip_Birouri_ID, Numar_Locuri_ID, Cladiri_ID, Etaj, Numar) VALUES (5, 4, 3, 1,  60);
INSERT INTO Birouri (Tip_Birouri_ID, Numar_Locuri_ID, Cladiri_ID, Etaj, Numar) VALUES (3, 3, 3, 1,  32);

-- Inchirieri
INSERT INTO Inchirieri (Companie_ID, Data_inchirierii, Data_start, Data_final)
  VALUES (1, DATE '2024-01-10', DATE '2024-01-12', DATE '2024-01-14');
INSERT INTO Inchirieri (Companie_ID, Data_inchirierii, Data_start, Data_final)
  VALUES (2, DATE '2024-02-05', DATE '2024-02-10', DATE '2024-02-11');
INSERT INTO Inchirieri (Companie_ID, Data_inchirierii, Data_start, Data_final)
  VALUES (3, DATE '2024-03-15', DATE '2024-03-20', DATE '2024-03-22');
INSERT INTO Inchirieri (Companie_ID, Data_inchirierii, Data_start, Data_final)
  VALUES (1, DATE '2024-04-01', DATE '2024-04-03', DATE '2024-04-05');
INSERT INTO Inchirieri (Companie_ID, Data_inchirierii, Data_start, Data_final)
  VALUES (4, DATE '2024-05-05', DATE '2024-05-07', DATE '2024-05-08');
INSERT INTO Inchirieri (Companie_ID, Data_inchirierii, Data_start, Data_final)
  VALUES (1, DATE '2024-06-01', DATE '2024-06-05', DATE '2024-06-06');
INSERT INTO Inchirieri (Companie_ID, Data_inchirierii, Data_start, Data_final)
  VALUES (1, DATE '2024-06-01', DATE '2024-06-02', DATE '2024-06-03');
INSERT INTO Inchirieri (Companie_ID, Data_inchirierii, Data_start, Data_final)
  VALUES (5, DATE '2024-07-01', DATE '2024-07-02', DATE '2024-07-03');
INSERT INTO Inchirieri (Companie_ID, Data_inchirierii, Data_start, Data_final)
  VALUES (6, DATE '2024-08-15', DATE '2024-08-16', DATE '2024-08-18');

-- Inchirieri_birouri
INSERT INTO Inchirieri_birouri (Inchiriere_ID, Birou_ID, Utilizator_ID) VALUES (1,1,1);
INSERT INTO Inchirieri_birouri (Inchiriere_ID, Birou_ID, Utilizator_ID) VALUES (1,2,2);
INSERT INTO Inchirieri_birouri (Inchiriere_ID, Birou_ID, Utilizator_ID) VALUES (2,3,3);
INSERT INTO Inchirieri_birouri (Inchiriere_ID, Birou_ID, Utilizator_ID) VALUES (2,4,4);
INSERT INTO Inchirieri_birouri (Inchiriere_ID, Birou_ID, Utilizator_ID) VALUES (3,1,1);
INSERT INTO Inchirieri_birouri (Inchiriere_ID, Birou_ID, Utilizator_ID) VALUES (3,2,2);
INSERT INTO Inchirieri_birouri (Inchiriere_ID, Birou_ID, Utilizator_ID) VALUES (4,1,3);
INSERT INTO Inchirieri_birouri (Inchiriere_ID, Birou_ID, Utilizator_ID) VALUES (4,2,4);
INSERT INTO Inchirieri_birouri (Inchiriere_ID, Birou_ID, Utilizator_ID) VALUES (5,2,5);
INSERT INTO Inchirieri_birouri (Inchiriere_ID, Birou_ID, Utilizator_ID) VALUES (5,3,1);
INSERT INTO Inchirieri_birouri (Inchiriere_ID, Birou_ID, Utilizator_ID) VALUES (6,6,6);
INSERT INTO Inchirieri_birouri (Inchiriere_ID, Birou_ID, Utilizator_ID) VALUES (6,1,7);
INSERT INTO Inchirieri_birouri (Inchiriere_ID, Birou_ID, Utilizator_ID) VALUES (7,5,6);
INSERT INTO Inchirieri_birouri (Inchiriere_ID, Birou_ID, Utilizator_ID) VALUES (7,2,7);

-- Facilitati_Birouri
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (1,2);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (2,1);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (2,2);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (3,1);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (3,2);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (3,3);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (4,1);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (4,2);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (4,3);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (5,1);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (5,2);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (5,3);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (5,4);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (5,5);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (5,6);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (5,7);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (6,1);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (6,2);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (6,3);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (6,4);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (6,8);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (7,1);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (7,2);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (7,3);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (7,4);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (7,9);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (8,1);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (8,2);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (9,1);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (9,2);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (9,3);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (9,4);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (9,5);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (9,6);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (9,7);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (10,1);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (10,2);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (10,3);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (10,8);
INSERT INTO Facilitati_Birouri (Birou_ID, Facilitate_ID) VALUES (10,9);

-- Metoda de Plata
INSERT INTO Metoda_de_Plata (Metoda_Plata) VALUES ('cash');
INSERT INTO Metoda_de_Plata (Metoda_Plata) VALUES ('card');
INSERT INTO Metoda_de_Plata (Metoda_Plata) VALUES ('transfer bancar');

-- Plati
INSERT INTO Plati (Inchiriere_ID, Companie_ID, Metoda_plata_ID, Suma_de_Plata, Data_plata) VALUES (1,1,2,  20.00, DATE '2024-01-13');
INSERT INTO Plati (Inchiriere_ID, Companie_ID, Metoda_plata_ID, Suma_de_Plata, Data_plata) VALUES (1,1,1,  10.00, DATE '2024-01-14');
INSERT INTO Plati (Inchiriere_ID, Companie_ID, Metoda_plata_ID, Suma_de_Plata, Data_plata) VALUES (2,2,3, 120.00, DATE '2024-02-10');
INSERT INTO Plati (Inchiriere_ID, Companie_ID, Metoda_plata_ID, Suma_de_Plata, Data_plata) VALUES (3,3,2, 200.00, DATE '2024-03-21');
INSERT INTO Plati (Inchiriere_ID, Companie_ID, Metoda_plata_ID, Suma_de_Plata, Data_plata) VALUES (4,1,2, 150.00, DATE '2024-04-04');
INSERT INTO Plati (Inchiriere_ID, Companie_ID, Metoda_plata_ID, Suma_de_Plata, Data_plata) VALUES (5,4,1, 300.00, DATE '2024-05-07');
INSERT INTO Plati (Inchiriere_ID, Companie_ID, Metoda_plata_ID, Suma_de_Plata, Data_plata) VALUES (6,6,1,  50.00, DATE '2024-07-02');
INSERT INTO Plati (Inchiriere_ID, Companie_ID, Metoda_plata_ID, Suma_de_Plata, Data_plata) VALUES (6,6,2,  55.00, DATE '2024-07-03');
INSERT INTO Plati (Inchiriere_ID, Companie_ID, Metoda_plata_ID, Suma_de_Plata, Data_plata) VALUES (7,5,3, 100.00, DATE '2024-08-16');
INSERT INTO Plati (Inchiriere_ID, Companie_ID, Metoda_plata_ID, Suma_de_Plata, Data_plata) VALUES (7,5,2,  90.00, DATE '2024-08-17');
INSERT INTO Plati (Inchiriere_ID, Companie_ID, Metoda_plata_ID, Suma_de_Plata, Data_plata) VALUES (7,5,1, 120.00, DATE '2024-08-18');

COMMIT;


